# KVTreeApp 更新日志

## [v1.1.0] - 2024-02-27
### ✨ 核心特性大爆发 (Core Features)
- **双引擎正则过滤 UI (Dual-Engine Rules)**: 彻底废弃了以往庞杂、门槛高的规则大黑框。现在采用“正反两套匹配方案”——上侧**🟡排除整行**：精准拦截并抛弃匹配关键词的源文本；下侧**🟡隐藏/替换内容**：剔除像 `\(\(.*?\)\)` (块引用) 等不必要的格式残留，仅将纯净的内容写入词库！
- **多核极速扫描引擎**: 底层扫描架构引入 `ThreadPoolExecutor` 多并发技术，在首次全库扫描或按下“立即重建”时，可瞬间跑满 CPU，几百万字的笔记库重建时间从分钟级压缩至**秒级**，带来 10 倍以上性能飙升。
- **Logseq 源属性“连坐”屏蔽**: 针对 Logseq 中 `alias::`、`type::` 等容易污染词库的系统级属性，重写了 `AST Parser`，只要添加屏蔽键，引擎会在 AST 建树期直接拦截并静默抛弃该行，绝不干扰您的极净词库。

### 🐛 界面与极客体验优化 (UI & UX)
- **全局动态自适应与无级滚动**: 重写基础架构，为主页面三大监控台全面挂载动态 `Scrollbar` 与**全界面鼠标滚轮 (MouseWheel) 无缝拦截绑定**，告别内容折叠。自动记忆主界面的缩放尺寸。
- **配置项“无感快存”**: 废弃繁琐的“保存修改”按钮，整个“偏好与高级设置”页的所有控制选项升级为按压即存的持久化数据流，彻底根除“忘点保存”的痛点。
- **完美托盘驻留**: 修复了之前点击控制台红叉时直接结束进程的逻辑 Bug。勾选“关闭时最小化”后，右上角的原生红色 X 会智能拦截，把 KVT 安静地雪藏到右下角托盘默默为您热更新词库。
- **脏数据自净**: 新版本启动时，会自动剥离原本在规则数据里留下的 `[排除规则]` 这些无意义骨架以及不再支持的 `;` 标记残留，完成新旧无缝迭代并提示旧版本无效路径。


## [v1.2.0] - 最热更新
### ✨ 新特性与深度重构 (Features & Refactoring)
- **🚫 Logseq 排除键管理全面进化**：
  - **双列网格布局**：窗口尺寸优化，空间利用率翻倍。
  - **智能前缀截断**：新增以 `*` 结尾的前缀模糊匹配机制（如 `card-*` 杀绝所有衍生属性），悬浮实时高亮 `[前缀]` 与 `[精确]` 的蓝灰 Badge 双轨制视觉反馈。
  - **原生中文拼音级实时过滤 & A→Z热排序**：极速检出并定位 27 项内置出厂核心 Logseq 污染元数据（涵盖 `excalidraw-*` / `todo` / `alias` / `direction` 等深度垃圾键的封杀）！
  - **傻瓜式自净化**：输入自动去重、移除空行、删除条目后网格自愈重排（Reflow Grid）。
- **⚡ 毫秒级防抖与缓存热重载（Debounce & Cache Swap）**：
  - **连续三击克星**：废除过去每点一下复选框就弹窗一次的粗暴行为。引入 2 秒智能防抖（Debounce）倒计时，点完静默批处理全量构建。
  - **缓存文件“免死金牌”**：现在修改扫描过滤选项，**不再物理抹除**缓存 JSON 文件！仅做内存级清空，复用源文件的文件修改时间（mtime）。在“源文件没变、只改扫描规则”的情况下，引擎速度瞬间从狂扫磁盘变成了秒级闪过。
- **🐛 缺陷清缴 (Bugfixes)**：
  - **Windows 任务栏图标原真呈现**：强制越过低版本 Tkinter `iconbitmap` 的缺陷，利用 PIL `wm_iconphoto` 及注册表 `AppUserModelID` 注入，彻底让您的任务栏和工具栏摆脱默认“羽毛”的困扰。
  - **虚空缓存防御**：当您清空输出目录时，表格路径智能变更为 `<仅缓存,未设输出目录>`，并彻底切断在系统默认根目录生成幽灵文件的旧疾。
  - **畸形数据耐受强化**：解决了 Logseq 源文件中出现 ` :: 值` 这种首尾缺失的残渣数据时，导致正则穿透并把脏数据推入最终词库的底层缺陷。

- ✔️**V1.0.0** 迎来里程碑大版本！
    - 🎨 **现代化 UI 重铸**：全面引入基于留白的舒适排版，并为所有操作按钮配置了保姆级悬浮提示框 (ToolTip) 与亲和力 Emoji 标识。
    - 🛡️ **生产级架构强固**：底层深度切割为 SSOT 状态驱动，应用『原子文件写入』根除断电词库丢失；引入『事件防抖』合并并发操作，永不卡死。
    - 🗑️ **数据安全管理**：危险操作区新增细粒度的【数据清除】复选框，可分别清除配置规则、解析树缓存及磁盘词库文件。
    - 👁️ **词库便捷预览**：生成结果表格新增【打开】直达按钮，一键调出系统默认编辑器/笔记本查看转换效果。
    - ⚡ **核心扫描速度翻倍**：利用 `os.scandir` 彻底替换 `os.walk`，配合默认不导出钩子，面对万级库卡顿归零。
    - ✨ 部署了官方全新精美高质量专属图标 (支持跨平台高DPI展示)。
- ✔️V0.7 [[修复：KVT的CPU占用过高]] （**大量深度重构**）使用时全遍历问题，建立缓存并改为原子化处理
- ✔️V0.6 [[修复：KVT的CPU占用过高]] 使用时频繁轮询问题，改为文件变动时才处理
- ✔️V0.5 [[让KVT 能随系统启动，最小化时在托盘]]
- ✔️V0.4
	- [[KVT选择输出]]（在结果列表可以勾选，被勾选的才会被输出，不被勾选的会被清理且不会输出）
- ✔️V0.3
	- [[让KVT能扫描Logseq md文件的特定属性键值]] #L-M管理 、未来健壮性考虑重构代码原子化脚本
- ✔️V0.2
	- ✔️[[让KVT能扫描指定文件夹]]、未来健壮性考虑重构代码原子化脚本
- ✔️V0.1
	- ✔️自动去除源文件内标签已经没有的 旧md文件
		- 也就是，软件需要记忆生成过的词库，如果识别的源文件内的标签已经没有该文件名则删除该没有的文件。
		- 比如根据 `#KV树-读书词库.md` 建立过 `#KV树-读书词库.md` 文件，但现在这个词条已经没了，或者已经改变原来的 `#KV树-读书词库.md` 文件就应该去除。
		- 另外输出的文件不要是`#KV树-读书词库.md`有两个后缀。
	- ✔️添加版本号
